{% extends 'layout.html' %}

{% block body %}
<main id="main" class="main">
  <div class="pagetitle">
      <h1>Cambios en las preferencias de la empresa</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="index">Home</a></li>
          <li class="breadcrumb-item active">UI</li>
        </ol>
      </nav>
    </div><!-- End Page Title -->



  <section class="section UI">
    <h1>Factor de permisibilidad</h1>
    <div class="box card-body">
      <form id="myform">
        <div class="col-xs-4">
          <button class="button2 btn btn-danger" type="button" value="3">-3</button>
          <button class="button2 btn btn-danger" type="button" value="2">-2</button>
          <button class="button2 btn btn-danger" type="button" value="1"><strong>-</strong></button>
        </div>
        <div class="inputdiv w-25 p-3 col-xs-4">
          <input type="text" id="cvalue" class="money form-control" value="11" disabled>
        </div>
        <div class="col-xs-4">
          <button class="button1 btn btn-success" type="button" value="1"><strong>+</strong></button>
          <button class="button1 btn btn-success" type="button" value="2">+2</button>
          <button class="button1 btn btn-success" type="button" value="3">+3</button>
        </div>
      </form>
    </div>
    <h1>Solicitudes de Dispositivos</h1>
    <div class="box card-body">
      <form id="myform2">
        <div class="col-xs-4">
          <button class="button4 btn btn-danger" type="button" value="3">-3</button>
          <button class="button4 btn btn-danger" type="button" value="2">-2</button>
          <button class="button4 btn btn-danger" type="button" value="1"><strong>-</strong></button>
        </div>
        <div class="inputdiv w-25 p-3 col-xs-4">
          <input type="text" id="dvalue" class="money form-control" value="4" disabled>
        </div>
        <div class="col-xs-4">
          <button class="button3 btn btn-success" type="button" value="1"><strong>+</strong></button>
          <button class="button3 btn btn-success" type="button" value="2">+2</button>
          <button class="button3 btn btn-success" type="button" value="3">+3</button>
        </div>
      </form>
    </div>
  </section>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script>
    const fmt = new Intl.NumberFormat('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 });

    $(document).ready(function() {
      const $cvalue = $('#cvalue');
      $('#myform .button1').on('click', function() {
        const val = +$(this).val().replace(/\D/g, "") + +$cvalue.val().replace(/\D/g, "")
        $cvalue.val(fmt.format(val));
      });
      $('#myform .button2').on('click', function() {

        if($cvalue.val()>0){  
          const val = -$(this).val().replace(/\D/g, "") + +$cvalue.val().replace(/\D/g, "")
          if(val<0){
            $cvalue.val(0);
          }else{
            $cvalue.val(fmt.format(val));
          }
        }
      });
      const $dvalue = $('#dvalue');
      $('#myform2 .button3').on('click', function() {
        const val = +$(this).val().replace(/\D/g, "") + +$dvalue.val().replace(/\D/g, "")
        $dvalue.val(fmt.format(val));
      });
      $('#myform2 .button4').on('click', function() {

        if($dvalue.val()>0){  
          const val = -$(this).val().replace(/\D/g, "") + +$dvalue.val().replace(/\D/g, "")
          if(val<0){
            $dvalue.val(0);
          }else{
            $dvalue.val(fmt.format(val));
          }
        }
      });
    });
  </script>
</main>

{% endblock %}